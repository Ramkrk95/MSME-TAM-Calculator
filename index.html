<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MSME TAM Calculator</title>
    <style>
        /* ... (styles remain unchanged) ... */
    </style>
</head>
<body>
    <div class="container">
        <h1>MSME TAM Calculator</h1>
        <p>
            Are you developing a product or solution for the MSME (Micro, Small, and Medium Enterprises) sector in India? This calculator is designed to help you estimate the total addressable market (TAM) by providing insights into the number of companies that have already embraced digital tools and are potentially willing to invest in the software you are planning to build.
        </p>
        <h2>Instructions</h2>
        <ul>
            <li>Identify the number of MSMEs that are digitally active and open to adopting new technologies.</li>
            <li>Understand market potential for your product or solution.</li>
            <li>Make informed decisions to effectively target your audience.</li>
        </ul>
        <p>Simply fill in the required details to discover the potential market size for your innovative product or solution. Let's get started!</p>

        <!-- Form Fields -->
        <form id="tamForm">
            <label for="email">Email *</label>
            <input type="email" id="email" name="email" placeholder="Valid email address" required>

            <label for="industryProductType">Industry/Product Type *</label>
            <select id="industryProductType" name="industryProductType" required>
                <option value="">Select an option</option>
                <option value="Industry-ecommerce">Industry-ecommerce</option>
                <option value="Industry-SaaS">Industry-SaaS</option>
                <option value="Industry- Food">Industry- Food</option>
                <option value="Industry- Travel">Industry- Travel</option>
                <option value="Industry- Edtech">Industry- Edtech</option>
                <option value="Product- Accounting & Book Keeping">Product- Accounting & Book Keeping</option>
                <option value="Product- Cybersecurity">Product- Cybersecurity</option>
                <option value="Product- HR">Product- HR</option>
                <option value="Product- CRM">Product- CRM</option>
            </select>

            <label for="price">Price of your product/service yearly (in INR) *</label>
            <input type="number" id="price" name="price" placeholder="Enter price in INR" required>

            <label for="name">Name</label>
            <input type="text" id="name" name="name" placeholder="Your name">

            <button type="submit">Calculate TAM</button>
        </form>

        <!-- Section to display the TAM result -->
        <div id="tamResult"></div>

        <!-- Disclaimer -->
        <div class="disclaimer">
            <p><strong>Disclaimer:</strong> The TAM calculated here is a high-level estimate based on limited data inputs. 
            For a more accurate and closer TAM, additional filtering such as company size, geographic location, revenue brackets, 
            and technology adoption levels should be considered. This tool provides a preliminary market size, and further detailed 
            analysis is recommended to refine your strategy.</p>
        </div>
    </div>

    <!-- JavaScript to handle form submission and display the result -->
    <script>
        document.getElementById('tamForm').addEventListener('submit', async function(event) {
            event.preventDefault(); // Prevent the default form submission

            // Collect the form data
            var email = document.getElementById('email').value;
            var industryProductType = document.getElementById('industryProductType').value;
            var price = document.getElementById('price').value;
            var name = document.getElementById('name').value;

            // Debug: Log the form data to the console to check
            console.log('Form Data:', {
                email: email,
                industryProductType: industryProductType.trim(),
                price: price,
                name: name
            });

            // Send the form data to the backend via POST
            try {
                const response = await fetch('https://msme-tam-calculator.vercel.app/api/calculate-tam', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        email: email,
                        industryProductType: industryProductType.trim(),
                        price: price,
                        name: name,
                    }),
                });

                const result = await response.json(); // Parse the JSON response

                // Display the TAM result on the page in the desired format
                if (response.ok) {
                    document.getElementById('tamResult').innerHTML = `
                        <p>The Total Addressable Market (TAM in INR) is: ${result.tam}</p>
                        <p>Relevant Companies: ${result.relevantCompanies}</p>
                        <p>Pricing (in INR): ${result.pricing}</p>
                    `;
                    console.log('TAM calculation successful. Data should be stored in Google Sheets.');
                } else {
                    document.getElementById('tamResult').innerHTML = 'Could not calculate TAM. Please check your input.';
                    console.error('Error response from server:', result);
                }
            } catch (error) {
                console.error('Error:', error);
                document.getElementById('tamResult').innerHTML = 'An error occurred while calculating TAM. Please try again.';
            }
        });
    </script>
</body>
</html>
