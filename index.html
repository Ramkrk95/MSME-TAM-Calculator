<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MSME TAM Calculator</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <style>
        .container { max-width: 600px; margin-top: 50px; }
        .error { color: red; margin-top: 10px; }
        .result { margin-top: 20px; font-weight: bold; }
    </style>
</head>
<body>

<div class="container">
    <h2>Calculate the TAM in the MSME Sector</h2>
    <p><strong>Instructions:</strong></p>
    <ul>
        <li>Identify the number of MSMEs that are digitally active and open to adopting new technologies.</li>
        <li>Understand market potential for your product or solution.</li>
        <li>Make informed decisions to effectively target your audience.</li>
    </ul>
    <p>Simply fill in the required details to discover the potential market size for your innovative product or solution. Let's get started!</p>

    <form id="tamForm">
        <div class="form-group">
            <label for="email">Email *</label>
            <input type="email" class="form-control" id="email" required>
        </div>
        <div class="form-group">
            <label for="industryProductType">Industry/Product Type *</label>
            <select id="industryProductType" class="form-control" required>
                <option value="">Select an option</option>
                <option value="Industry-ecommerce">Industry-ecommerce</option>
                <option value="Industry-SaaS">Industry-SaaS</option>
                <option value="Industry-Food">Industry-Food</option>
                <option value="Industry-Travel">Industry-Travel</option>
                <option value="Industry-Edtech">Industry-Edtech</option>
                <option value="Product-Accounting & Book Keeping">Product-Accounting & Book Keeping</option>
                <option value="Product-Cybersecurity">Product-Cybersecurity</option>
                <option value="Product-HR">Product-HR</option>
                <option value="Product-CRM">Product-CRM</option>
            </select>
        </div>
        <div class="form-group">
            <label for="price">Price of your product/service yearly (in INR) *</label>
            <input type="number" class="form-control" id="price" required>
        </div>
        <div class="form-group">
            <label for="name">Name *</label>
            <input type="text" class="form-control" id="name" required>
        </div>
        <button type="submit" class="btn btn-primary">Calculate TAM</button>
    </form>

    <p class="error" id="error"></p>
    <p class="result" id="result"></p>
</div>

<script>
    document.getElementById('tamForm').addEventListener('submit', async function(event) {
        event.preventDefault();
        document.getElementById('error').textContent = '';
        document.getElementById('result').textContent = '';

        const email = document.getElementById('email').value;
        const industryProductType = document.getElementById('industryProductType').value;
        const price = document.getElementById('price').value;
        const name = document.getElementById('name').value;

        try {
            const response = await fetch('http://localhost:3000/api/calculate-tam', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    email,
                    industryProductType,
                    price,
                    name
                })
            });

            const data = await response.json();
            if (response.ok) {
                document.getElementById('result').textContent = `TAM: ${data.tam}, Relevant Companies: ${data.relevantCompanies}, Pricing: ${data.pricing}`;
            } else {
                document.getElementById('error').textContent = `Error: ${data.message}`;
            }
        } catch (error) {
            document.getElementById('error').textContent = 'Error: Unable to submit the form or calculate TAM';
        }
    });
</script>

</body>
</html>
